{% extends 'flights/base.html' %}

{% block content %}
<div class="card p-4">
  <h3>Shortest Distance Between Two Airports</h3>
  <p class="text-muted">Calculates the path distance between two nodes in the same route tree.</p>

  <form method="post">{% csrf_token %}
    {{ form.as_p }}
    <button class="btn btn-primary">Find Shortest Path</button>
    <a href="{% url 'flights:index' %}" class="btn btn-secondary">Back</a>
  </form>

  {% if result %}
  <div class="mt-3 alert alert-success">
    <h4>Shortest Path Found</h4>
    <div class="display-4">{{ result.distance }} <span class="fs-6">units/min</span></div>
    <hr>
    <div><strong>Route:</strong> {{ result.route.name }}</div>
    <div><strong>Node A:</strong> {{ result.node_a.airport_code }} ({{ result.node_a.get_node_type_display }})</div>
    <div><strong>Node B:</strong> {{ result.node_b.airport_code }} ({{ result.node_b.get_node_type_display }})</div>
  </div>
  {% elif request.method == 'POST' %}
  <div class="mt-3 alert alert-warning">
    No path found between these airports. They might be in different routes or not connected.
  </div>
  {% endif %}
</div>
{% endblock %}